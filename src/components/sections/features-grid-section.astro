---
import { Image } from 'astro:assets';
import client from "../../../tina/__generated__/client";

import healthcareImg from '../../assets/images/segment-healthcare.jpg';
import spaBeautyImg from '../../assets/images/segment-spa-beauty.png';
import foodImg from '../../assets/images/segment-food.jpg';
import dentalImg from '../../assets/images/segment-dental.jpg';

const featuresData = await client.queries.features({
  relativePath: "index.json",
});

const features = featuresData.data.features;

// Map segment titles to imported images
const segmentImages = {
  "Healthcare": healthcareImg,
  "Spa & Beauty Salon": spaBeautyImg,
  "Food Processing": foodImg,
  "Dental": dentalImg,
};
---

<section class="px-12 py-[100px] max-w-[1440px] mx-auto max-md:px-5 max-md:py-16" id="features">
  <div class="max-w-[640px] mx-auto text-center mb-16">
    <span class="inline-block text-4xl font-extrabold uppercase tracking-[0.04em] text-[var(--color-primary)] mb-4">
      {features.label}
    </span>
    <h2 class="text-[24px] font-semibold tracking-[-0.01em] text-slate-900 mb-5 leading-[1.3] max-md:text-[20px]">
      {features.title}
    </h2>
    <p class="text-[17px] text-[var(--color-text-muted)] leading-[1.7]">
      {features.description}
    </p>
  </div>

  <div class="grid grid-cols-4 gap-6 max-xl:grid-cols-2 max-md:grid-cols-1">
    {features.items.map((item) => (
      <div class="group relative rounded-[var(--radius-lg)] overflow-hidden cursor-pointer transition-all duration-300 hover:-translate-y-1 hover:shadow-xl">
        <Image
          src={segmentImages[item.title]}
          alt={item.title}
          width={352}
          height={452}
          class="w-full h-[452px] object-cover transition-transform duration-500 group-hover:scale-105"
          format="webp"
        />
        <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"></div>
        <div class="absolute bottom-0 left-0 right-0 p-6">
          <h3 class="text-xl font-bold text-white">{item.title}</h3>
        </div>
      </div>
    ))}
  </div>
</section>
